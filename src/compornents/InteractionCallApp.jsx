import { motion } from "framer-motion";
import { AriHelloIcon, AriwowIcon } from "src/compornents/Icons";

const draw = {
  hidden: { pathLength: 0, opacity: 0 },
  visible: {
    pathLength: 1,
    opacity: 1,
    transition: {
      pathLength: { type: "spring", duration: 1.5, bounce: 0 },
      opacity: { duration: 0.03 },
    },
  },
};

const popup = {
  initial: {
    y: 200,
    opacity: 0,
  },
  animate: {
    y: 0,
    opacity: [0, 1, 1, 0],
    transition: {
      y: {
        duration: 0.5,
        ease: "easeOut",
        delay: 3.7,
      },
      opacity: {
        duration: 2,
        times: [0, 0.1, 0.8, 1],
        delay: 3.7,
      },
    },
  },
};

const opacity = {
  initial: {
    opacity: 0,
  },
  animate: {
    opacity: [0, 1, 1, 0], // 0 → 1（表示）→ 1（維持）→ 0（消える）
    transition: {
      duration: 2, // 全体の時間（出現 + 維持 + 消える）
      times: [0, 0.1, 0.8, 1],
      delay: 1.3,
    },
  },
};

const talkcomand = {
  initial: {
    opacity: 0,
  },
  animate: {
    opacity: [0, 1, 1, 0],
    transition: {
      duration: 1.5,
      times: [0, 0.1, 0.6, 1],
      delay: 4.5,
    },
  },
};

const last = {
  initial: {
    opacity: 0,
  },
  animate: {
    opacity: 1,
    transition: {
      delay: 5.2,
    },
  },
};

const InteractionCallApp = () => {
  return (
    <>
      <motion.svg
        width="220"
        height="22"
        viewBox="-10 0 240 22"
        initial="hidden"
        animate="visible"
        className="absolute bottom-0 z-10"
      >
        <rect y="5" width="198" height="22" fill="white" />
        <motion.ellipse
          cx="110"
          cy="5"
          rx="110"
          ry="5"
          fill="#C6C4C7"
          stroke="#C6C4C7"
          variants={draw}
          custom={1}
          style={shape}
        />
      </motion.svg>

      <motion.svg
        width="112"
        height="112"
        viewBox="0 0 112 112"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        variants={opacity}
        initial="initial"
        animate="animate"
        className="absolute right-8 bottom-2 w-20 md:w-32"
      >
        <path
          d="M56 10.957C25.121 10.957 0 29.7988 0 52.957C0 64.168 5.74416 74.6288 16.205 82.5331C15.4588 86.4551 13.1464 91.9101 6.69922 97.4394C6.08978 97.9589 5.85156 98.793 6.09175 99.5567C6.33194 100.32 7.00394 100.867 7.80062 100.947C7.94522 100.961 8.83575 101.043 10.2988 101.043C15.1933 101.043 26.4941 100.125 37.7186 92.6739C43.5857 94.1894 49.7304 94.9573 55.9998 94.9573C86.8787 94.9573 112 76.1154 112 52.9573C112 29.7991 86.879 10.957 56 10.957ZM56 90.9572C49.7676 90.9572 43.6699 90.1563 37.877 88.5783C37.3126 88.426 36.7012 88.5275 36.2149 88.8635C27.4218 94.9376 18.3262 96.5489 12.9668 96.9258C18.1368 91.2284 19.8653 85.7558 20.3536 81.8946C20.4455 81.1681 20.1329 80.4493 19.5372 80.0214C9.51759 72.8086 4.00006 63.1972 4.00006 52.957C4.00006 32.0038 27.3262 14.9571 56 14.9571C84.6738 14.9571 108 32.0038 108 52.957C108 73.9102 84.6738 90.9572 56 90.9572Z"
          fill="black"
        />
        <path
          d="M52.5992 61.1345C52.3017 59.6001 52.3574 58.2154 52.7665 56.9804C53.2128 55.7454 53.8636 54.6414 54.719 53.6684C55.6116 52.658 56.5785 51.7411 57.6198 50.9178C58.6983 50.057 59.7211 49.215 60.688 48.3916C61.655 47.5683 62.4545 46.7263 63.0868 45.8655C63.719 44.9674 64.0351 43.9943 64.0351 42.9465C64.0351 41.6366 63.719 40.4765 63.0868 39.4661C62.4545 38.4556 61.5248 37.6697 60.2975 37.1084C59.0702 36.5096 57.4897 36.2102 55.5558 36.2102C53.6591 36.2102 51.8182 36.6406 50.0331 37.5013C48.2851 38.3246 46.6116 39.597 45.0124 41.3185L42 38.5117C43.8595 36.5283 45.9236 34.9565 48.1921 33.7963C50.4607 32.5988 53.1012 32 56.1136 32C58.7541 32 61.0227 32.4304 62.9194 33.2911C64.8533 34.1519 66.3409 35.3681 67.3822 36.9399C68.4607 38.4743 69 40.3268 69 42.4974C69 43.9195 68.6839 45.1732 68.0517 46.2585C67.4194 47.3438 66.6012 48.3355 65.5971 49.2337C64.6302 50.1319 63.6074 51.0113 62.5289 51.8721C61.4504 52.6954 60.4463 53.5561 59.5165 54.4543C58.624 55.3525 57.936 56.3442 57.4525 57.4295C57.0062 58.5148 56.9132 59.7498 57.1736 61.1345H52.5992ZM54.9979 75C53.9938 75 53.1384 74.6632 52.4318 73.9896C51.7252 73.3159 51.3719 72.4178 51.3719 71.295C51.3719 70.1723 51.7252 69.2742 52.4318 68.6005C53.1384 67.8895 53.9938 67.5339 54.9979 67.5339C55.9649 67.5339 56.8017 67.8895 57.5083 68.6005C58.2149 69.2742 58.5682 70.1723 58.5682 71.295C58.5682 72.4178 58.2149 73.3159 57.5083 73.9896C56.8017 74.6632 55.9649 75 54.9979 75Z"
          fill="#272343"
        />
      </motion.svg>

      <motion.svg
        variants={popup}
        initial="initial"
        animate="animate"
        className="absolute top-[25%] w-24 md:w-32"
      >
        <AriwowIcon />
      </motion.svg>

      <motion.svg
        width="112"
        height="112"
        viewBox="0 0 112 112"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        variants={talkcomand}
        initial="initial"
        animate="animate"
        className="absolute right-6 top-3 md:right-8 md:top-5 w-20 md:w-32"
      >
        <path
          d="M56 10.957C25.121 10.957 0 29.7988 0 52.957C0 64.168 5.74416 74.6288 16.205 82.5331C15.4588 86.4551 13.1464 91.9101 6.69922 97.4394C6.08978 97.9589 5.85156 98.793 6.09175 99.5567C6.33194 100.32 7.00394 100.867 7.80062 100.947C7.94522 100.961 8.83575 101.043 10.2987 101.043C15.1933 101.043 26.4941 100.125 37.7186 92.674C43.5857 94.1894 49.7304 94.9573 55.9998 94.9573C86.8787 94.9573 112 76.1154 112 52.9573C112 29.7991 86.879 10.957 56 10.957ZM56 90.9572C49.7676 90.9572 43.6699 90.1563 37.877 88.5783C37.3126 88.426 36.7012 88.5275 36.2149 88.8635C27.4218 94.9376 18.3262 96.5489 12.9668 96.9258C18.1368 91.2284 19.8653 85.7558 20.3536 81.8946C20.4455 81.1681 20.1329 80.4493 19.5372 80.0214C9.51759 72.8086 4.00006 63.1972 4.00006 52.957C4.00006 32.0038 27.3263 14.9571 56 14.9571C84.6738 14.9571 108 32.0038 108 52.957C108 73.9102 84.6738 90.9572 56 90.9572Z"
          fill="black"
        />
        <path
          d="M53.9375 59.5671L52.6875 36.8951L52.5625 30H59.4375L59.3125 36.8951L58.0625 59.5671H53.9375ZM56 74C54.875 74 53.9167 73.6494 53.125 72.9482C52.375 72.247 52 71.3121 52 70.1434C52 68.9748 52.3958 68.0398 53.1875 67.3386C53.9792 66.5985 54.9167 66.2284 56 66.2284C57.0833 66.2284 58.0208 66.5985 58.8125 67.3386C59.6042 68.0398 60 68.9748 60 70.1434C60 71.3121 59.6042 72.247 58.8125 72.9482C58.0208 73.6494 57.0833 74 56 74Z"
          fill="#272343"
        />
      </motion.svg>

      <motion.svg
        variants={popup}
        initial="initial"
        animate="animate"
        className="absolute top-[25%] w-24 md:w-32"
      >
        <AriwowIcon />
      </motion.svg>

      <motion.svg
        variants={last}
        initial="initial"
        animate="animate"
        className="absolute top-[25%] w-24 md:w-32 animate-float"
      >
        <AriHelloIcon />
      </motion.svg>

      <motion.svg
        width="112"
        height="112"
        viewBox="0 0 112 112"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        variants={last}
        initial="initial"
        animate="animate"
        className="absolute right-6 top-3 md:right-8 md:top-5 w-20 md:w-32"
      >
        <path
          fill="#fff"
          d="m18.5 24.5 20-9L62 13l21.5 5.5 18.5 11 8 15v19l-20 22-25 8L36.5 91l-26 8.5 8-17.5-12-12-5-21L9 34.5l9.5-10Z"
        />
        <path
          fill="#000"
          d="M56 10.957c-30.879 0-56 18.842-56 42 0 11.21 5.744 21.672 16.205 29.576-.746 3.922-3.059 9.377-9.506 14.906a2 2 0 0 0 1.101 3.508c.145.014 1.036.096 2.499.096 4.894 0 16.195-.918 27.42-8.37 5.867 1.516 12.011 2.284 18.28 2.284 30.88 0 56.001-18.842 56.001-42s-25.121-42-56-42Zm0 80c-6.232 0-12.33-.8-18.123-2.379a2.01 2.01 0 0 0-1.662.285c-8.793 6.074-17.889 7.686-23.248 8.063 5.17-5.698 6.898-11.17 7.387-15.032a1.997 1.997 0 0 0-.817-1.873C9.517 72.808 4 63.197 4 52.957c0-20.953 23.326-38 52-38s52 17.047 52 38-23.326 38-52 38Z"
        />
        <path
          fill="#000"
          fillRule="evenodd"
          d="M45.053 56a2.05 2.05 0 0 1 2.052 2.045c0 3.082 1.14 5.242 2.732 6.653C51.468 66.143 53.7 66.91 56 66.91c2.3 0 4.532-.766 6.163-2.21 1.593-1.411 2.732-3.572 2.732-6.654A2.05 2.05 0 0 1 66.947 56 2.05 2.05 0 0 1 69 58.045c0 4.192-1.598 7.486-4.11 9.711C62.416 69.948 59.174 71 56 71c-3.174 0-6.416-1.052-8.89-3.244-2.512-2.225-4.11-5.52-4.11-9.71A2.05 2.05 0 0 1 45.053 56Z"
          clipRule="evenodd"
        />
        <circle cx={46} cy={44} r={4} fill="#000" />
        <circle cx={65} cy={44} r={4} fill="#000" />
      </motion.svg>
    </>
  );
};

export default InteractionCallApp;

const shape = {
  strokeWidth: 10,
  strokeLinecap: "round",
  fill: "transparent",
};
